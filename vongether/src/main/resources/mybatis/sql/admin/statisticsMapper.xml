<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.vongether.admin.board.dao.BoardAdminDAO">
	<!-- 일간 카운트 정보 : 아이디, 일간게시글 카운트 -->
	<select id="dayBoardTop3" parameterType="map" resultType="map">
		SELECT m.m_id, (SELECT COUNT(b.m_id) 
						FROM board b 
						WHERE m.m_id = b.m_id 
						AND b.b_regdate > CURDATE()) counter
  		FROM member m
		ORDER BY counter desc
		LIMIT 3 offset 0
	</select>
	<!-- 일간 카운트 정보 : 아이디, 일간게시글 카운트 -->
	<select id="dayReplyTop3" parameterType="map" resultType="map"><!--  resultMap="boardResultMap"> -->
		SELECT m.m_id, (SELECT COUNT(b.m_id) 
						FROM reply b 
						WHERE m.m_id = b.m_id 
						AND b.r_regdate > CURDATE()) counter
  		FROM member m
		ORDER BY counter desc
		LIMIT 3 offset 0
	</select>
	
	<!-- 주간 카운트 정보 : 아이디, 주간게시글 카운트 -->
	<select id="weekBoardTop3" parameterType="map" resultType="map">
		SELECT m_id, (SELECT COUNT(b.m_id) 
					  FROM board b 
					  WHERE b.m_id = m.m_id 
					  AND b.b_regdate > DATE_FORMAT(DATE_SUB(now(), INTERVAL (DAYOFWEEK(now())-1) DAY), '%Y/%m/%d')) counter
		FROM member m
		ORDER BY counter desc
		LIMIT 3 OFFSET 0
	</select>
	<!-- 주간 카운트 정보 : 아이디, 주간게시글 카운트 -->
	<select id="weekReplyTop3" parameterType="map" resultType="map">
		SELECT m_id, (SELECT COUNT(b.m_id) 
					  FROM reply b 
					  WHERE b.m_id = m.m_id 
					  AND b.r_regdate > DATE_FORMAT(DATE_SUB(now(), INTERVAL (DAYOFWEEK(now())-1) DAY), '%Y/%m/%d')) counter
		FROM member m
		ORDER BY counter desc
		LIMIT 3 OFFSET 0
	</select>

	<!-- 월간 카운트 정보 : 아이디, 월간게시글 카운트 -->
	<select id="monthReplyTop3" parameterType="map" resultType="map">
		SELECT m.m_id, (SELECT COUNT(b.m_id)
						FROM reply b
						WHERE m.m_id = b.m_id
						AND MONTH(b.r_regdate) = MONTH(NOW())) counter
		FROM member m
		ORDER BY counter desc
		LIMIT 3 OFFSET 0
	</select> 
	
	<!-- 월간 카운트 정보 : 아이디, 월간게시글 카운트 -->
	<select id="monthBoardTop3" parameterType="map" resultType="map">
		SELECT m.m_id, (SELECT COUNT(b.m_id)
						FROM board b
						WHERE m.m_id = b.m_id
						AND MONTH(b.b_regdate) = MONTH(NOW())) counter
		FROM member m
		ORDER BY counter desc
		LIMIT 3 OFFSET 0
	</select> 
	
	<!-- 유저 게시판 글수 : 아이디, 게시글 카운트 -->
	<!-- 
	<select id="userBoardArticleCount" parameterType="map" resultType="map">
		SELECT b.m_id, COUNT(b.m_id) counter
		FROM board b
		WHERE b.m_id = #{mId}
		AND b_delYN = false
	</select> 
	
	유저 댓글 글수 : 아이디, 게시글 카운트
	<select id="userReplyArticleCount" parameterType="map" resultType="map">
		SELECT m_id, COUNT(m_id) counter
		FROM reply 
		WHERE m_id = #{mId}
	</select>  
	-->
	
</mapper>
